/Users/lan/Desktop/code/ai_sentiney/src/analyst/gemini_client.py:1: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai
[32m19:03:28 [INFO] sentinel: Configuration loaded successfully.[0m
[32m19:03:28 [INFO] sentinel: === Starting Analysis (CLOSE) ===[0m
[32m19:03:28 [INFO] sentinel: Circuit breaker states loaded from disk.[0m
[32m19:03:28 [INFO] sentinel: Starting Batch Data Collection (Dual Source)...[0m
[32m19:03:28 [INFO] sentinel: Circuit Breaker: Efinance entering half-open state (trying recovery)[0m
[31m19:03:33 [ERROR] sentinel: Command fetch_spot_data timed out after 5s.[0m
[33m19:03:33 [WARNING] sentinel: Source Efinance failed for fetch_spot_data: [0m
[33m19:03:33 [WARNING] sentinel: Circuit Breaker: Efinance OPEN after 6 consecutive failures. Will retry in 30.0s.[0m
[32m19:03:33 [INFO] sentinel: Circuit Breaker: AkShare entering half-open state (trying recovery)[0m
/Users/lan/Desktop/code/ai_sentiney/.venv/lib/python3.13/site-packages/urllib3/poolmanager.py:199: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x10c2ad030>
  def __init__(
ResourceWarning: Enable tracemalloc to get the object allocation traceback
[31m19:03:38 [ERROR] sentinel: AkShare spot fetch failed: HTTPSConnectionPool(host='82.push2.eastmoney.com', port=443): Max retries exceeded with url: /api/qt/clist/get?pn=1&pz=100&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&fid=f12&fs=m%3A0+t%3A6%2Cm%3A0+t%3A80%2Cm%3A1+t%3A2%2Cm%3A1+t%3A23%2Cm%3A0+t%3A81+s%3A2048&fields=f1%2Cf2%2Cf3%2Cf4%2Cf5%2Cf6%2Cf7%2Cf8%2Cf9%2Cf10%2Cf12%2Cf13%2Cf14%2Cf15%2Cf16%2Cf17%2Cf18%2Cf20%2Cf21%2Cf23%2Cf24%2Cf25%2Cf22%2Cf11%2Cf62%2Cf128%2Cf136%2Cf115%2Cf152 (Caused by ProxyError('Unable to connect to proxy', RemoteDisconnected('Remote end closed connection without response')))[0m
[31m19:03:38 [ERROR] sentinel: All sources failed for fetch_spot_data.[0m
[33m19:03:38 [WARNING] sentinel: All sources failed to fetch bulk spot data. Will rely on individual fetch.[0m
[32m19:03:38 [INFO] sentinel: Fetching market breadth...[0m
[32m19:03:38 [INFO] sentinel: Fetching Northbound funds...[0m
[32m19:03:38 [INFO] sentinel: Fetching macro news...[0m
  0%|          | 0/8 [00:00<?, ?it/s] 12%|â–ˆâ–        | 1/8 [00:00<00:00,  8.48it/s] 25%|â–ˆâ–ˆâ–Œ       | 2/8 [00:00<00:00,  8.38it/s] 38%|â–ˆâ–ˆâ–ˆâ–Š      | 3/8 [00:00<00:00,  7.98it/s] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 4/8 [00:00<00:00,  8.24it/s] 62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 5/8 [00:00<00:00,  6.58it/s] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 6/8 [00:00<00:00,  7.04it/s] 88%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š | 7/8 [00:00<00:00,  7.18it/s]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8/8 [00:01<00:00,  6.88it/s]                                             0it [00:00, ?it/s]                    0%|          | 0/14 [00:00<?, ?it/s]  7%|â–‹         | 1/14 [00:00<00:01,  7.91it/s] 21%|â–ˆâ–ˆâ–       | 3/14 [00:00<00:01,  6.75it/s] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 5/14 [00:00<00:01,  7.98it/s] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 6/14 [00:00<00:01,  6.96it/s] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 7/14 [00:01<00:01,  5.52it/s] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 8/14 [00:01<00:01,  5.20it/s] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 9/14 [00:01<00:00,  5.05it/s] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 10/14 [00:01<00:00,  5.59it/s] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 11/14 [00:01<00:00,  5.19it/s] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 12/14 [00:02<00:00,  5.39it/s] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 13/14 [00:02<00:00,  4.64it/s]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 14/14 [00:02<00:00,  5.19it/s]                                               [32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh510500[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh512480[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh588760[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh563300[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sz159819[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sz159934[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh510300[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sz159338[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh560780[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh510980[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh601899[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sz000603[0m
[32m19:03:42 [INFO] sentinel: Tencent Fetching Single Quote: http://qt.gtimg.cn/q=sh600089[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 588760 -> 0.851 (2.04%) Vol:1918464.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 510500 -> 8.377 (-0.21%) Vol:3443425.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 563300 -> 1.51 (-0.13%) Vol:2164190.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 512480 -> 1.636 (0.49%) Vol:6386633.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 159819 -> 1.602 (0.88%) Vol:2513130.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 159934 -> 11.155 (-0.49%) Vol:1657575.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 000603 -> 47.17 (-3.5%) Vol:286937.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 560780 -> 2.007 (-0.25%) Vol:526050.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 601899 -> 38.81 (0.47%) Vol:1996571.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 600089 -> 27.84 (-0.82%) Vol:1364762.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 510300 -> 4.733 (0.13%) Vol:6804617.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 159338 -> 1.251 (0.24%) Vol:44534860.0[0m
[32m19:03:42 [INFO] sentinel: âœ… Tencent Quote Success: 510980 -> 1.434 (0.07%) Vol:168672.0[0m
[32m19:03:43 [INFO] sentinel: Data Collected. Market Breadth: N/A (Tencent), North Funds: 0.0[0m
[32m19:03:43 [INFO] sentinel: Signal Tracker: è¿‘7æ—¥å‘½ä¸­ç‡52%(14/27)[0m
[32m19:03:43 [INFO] sentinel: Initializing Gemini Client with model: gemini-3-pro-preview[0m
[32m19:03:43 [INFO] sentinel: Sending request to Gemini (custom prompt)...[0m
[31m19:04:07 [ERROR] sentinel: Efinance spot fetch failed: Expecting value: line 1 column 1 (char 0)[0m
[32m19:04:15 [INFO] sentinel: Schema validation passed: 5 reviews[0m
[32m19:04:15 [INFO] sentinel: Close Analysis Completed.[0m
[32m19:04:15 [INFO] sentinel: Publish not requested: Skipping Feishu Push.[0m
[32m19:04:15 [INFO] sentinel: âœ… Saved close record to DB for 2026-02-10.[0m
[32m19:04:15 [INFO] sentinel: === Analysis (CLOSE) Finished ===[0m
=== æ”¶ç›˜å¤ç›˜ ===
æ€»ç»“: å¤ç›˜: å…¸å‹çš„èŠ‚å‰ç¼©é‡æ•´å›ºè¡Œæƒ…ã€‚å…¨å¸‚åœºé‡èƒ½æ˜¾è‘—èç¼©ï¼ˆæŒä»“æ ‡çš„é‡æ¯”æ™®éä½äº0.7ï¼‰ï¼Œè¡¨æ˜å¢é‡èµ„é‡‘å·²æå‰ä¼‘å‡ï¼Œå½“å‰ä¸ºçº¯ç²¹çš„å­˜é‡åšå¼ˆã€‚ä¸»çº¿æ–¹é¢ï¼Œä»Šæ—¥è™½æœ‰ç§‘åˆ›AIï¼ˆ+2.04%ï¼‰è¯•å›¾å¼•å¯¼åå¼¹ï¼Œä½†å—åˆ¶äºæ•´ä½“æµåŠ¨æ€§ä¸è¶³ï¼Œä¸”å¤§éƒ¨åˆ†ç§‘æŠ€ETFä»å¤„äºMA20ä¸‹æ–¹ï¼Œå®šæ€§ä¸º'è¶…è·ŒåæŠ½'è€Œéè¶‹åŠ¿åè½¬ã€‚æƒé‡è‚¡ï¼ˆæ²ªæ·±300ã€A500ï¼‰ç»´æŒåœ¨MA20é™„è¿‘çª„å¹…éœ‡è¡ï¼Œå……å½“å¸‚åœºå®šæµ·ç¥é’ˆã€‚æœ‰è‰²æ¿å—å†…éƒ¨å‡ºç°æ˜¾è‘—åˆ†åŒ–ï¼Œé“œé‡‘ï¼ˆç´«é‡‘ï¼‰æŠ—è·Œï¼Œé«˜æ³¢åŠ¨çš„ç™½é“¶ï¼ˆç››è¾¾ï¼‰ç ´ä½è¡¥è·Œï¼Œéœ€è­¦æƒ•é«˜ä½è‚¡çš„è·åˆ©äº†ç»“é£é™©ã€‚
æ¸©åº¦: å­˜é‡åšå¼ˆ (ä½æ¸©)

ğŸ“Š ä¿¡å·è¿½è¸ª: è¿‘7æ—¥å‘½ä¸­ç‡52%(14/27)
  âœ… ç››è¾¾èµ„æºï¼ˆç™½é“¶ï¼‰ DANGER[ä¸­] â†’ -3.5%
  âœ… ç´«é‡‘çŸ¿ä¸š SAFE[ä½] â†’ 0.47%
  âœ… ä¸­è¯2000ETF SAFE[ä½] â†’ -0.13%

  [000603] ç››è¾¾èµ„æº
    ä»Šæ—¥: æ”¾é‡ä¸‹è·Œ(-3.5%)ï¼Œæ”¶ç›˜ä»·(47.17)è¿œä½äºMA20(50.47)ï¼Œä¹–ç¦»ç‡è¾¾-6.54%ï¼ŒæŠ€æœ¯å½¢æ€ç ´ä½ã€‚MACDç©ºå¤´åŠ¨èƒ½å¢å¼ºï¼Œè™½ç„¶RSIæœªè¿›è¶…å–åŒºï¼Œä½†ä½œä¸ºé«˜è´å¡”å‘¨æœŸè‚¡ï¼Œè·Œç ´çŸ­æœŸè¶‹åŠ¿çº¿æ„å‘³ç€èµ„é‡‘æ­£åœ¨è¿›è¡ŒèŠ‚å‰é¿é™©ã€‚
    æ˜æ—¥: å‡ä»“/æ­¢æŸã€‚ä»Šæ—¥éªŒè¯äº†æ˜¨æ—¥çš„DANGERä¿¡å·ï¼Œè¶‹åŠ¿å·²åã€‚è‹¥æ˜æ—¥ä¸èƒ½å¿«é€Ÿæ”¶å¤48å…ƒä¸€çº¿ï¼Œéœ€é˜²æ­¢è¿›ä¸€æ­¥å›è¸©60æ—¥çº¿æ”¯æ’‘ã€‚ä¸å®œåšåå¼¹ã€‚
    æ”¯æ’‘:46.23 / å‹åŠ›:50.47
    æŒ‡æ ‡: MACDç©ºå¤´ | RSI=50.56 | å¸ƒæ—ä¸‹åŠåŒº | é‡æ¯”0.51x
  [601899] ç´«é‡‘çŸ¿ä¸š
    ä»Šæ—¥: ç¼©é‡ä¸Šæ¶¨(+0.47%)ï¼Œæ”¶ç›˜ä»·(38.81)ä¸»è¦è¿è¡Œåœ¨MA20(38.74)ä¹‹ä¸Šï¼Œè¡¨ç°è¿œå¼ºäºç››è¾¾ã€‚ä½œä¸ºè¡Œä¸šé¾™å¤´ï¼Œåœ¨é‡èƒ½èç¼©èƒŒæ™¯ä¸‹æ˜¾ç¤ºå‡ºæå¼ºçš„æ‰¿æ¥åŠ›ï¼ŒMACDè™½ä¸ºç©ºå¤´ä½†ç»¿æŸ±æœªæ˜æ˜¾æ”¾å¤§ã€‚
    æ˜æ—¥: æŒä»“è§‚æœ›ã€‚åªè¦å®ˆä½MA20ç”Ÿå‘½çº¿ï¼Œå³å¯è§†ä¸ºä¸Šå‡è¶‹åŠ¿ä¸­çš„æ­£å¸¸æ•´ç†ã€‚å…³æ³¨å›½é™…é‡‘ä»·/é“œä»·å¤œç›˜æ³¢åŠ¨ã€‚
    æ”¯æ’‘:38.74 / å‹åŠ›:40.75
    æŒ‡æ ‡: MACDç©ºå¤´ | RSI=54.17 | å¸ƒæ—ä¸ŠåŠåŒº | é‡æ¯”0.57x
  [588760] ç§‘åˆ›äººå·¥æ™ºèƒ½ETF
    ä»Šæ—¥: ç¼©é‡åå¼¹(+2.04%)ï¼Œæ˜¯ä»Šæ—¥ç»„åˆä¸­åå¼¹æœ€å¼ºå“ç§ã€‚ä½†éœ€æ³¨æ„æ”¶ç›˜ä»·(0.85)ä»è¢«å‹åˆ¶åœ¨MA20(0.86)ä¹‹ä¸‹ï¼Œä¸”é‡æ¯”ä»…0.72ï¼Œå±äºæ— é‡åæŠ½ï¼Œå¸ƒæ—å¸¦ä¸‹è½¨æ”¯æ’‘æœ‰æ•ˆä½†ä¸Šæ”»åŠ¨èƒ½ä¸è¶³ã€‚
    æ˜æ—¥: è§‚å¯Ÿ/é€¢é«˜å‡ç£…ã€‚æ˜æ—¥å…³é”®çœ‹èƒ½å¦å¸¦é‡çªç ´MA20(0.86)ã€‚è‹¥ç¼©é‡è§¦åŠMA20å›è½ï¼Œåˆ™ç¡®è®¤ä¸ºä¸‹è·Œä¸­ç»§ï¼Œåº”é™ä½ä»“ä½ï¼›è‹¥æ”¾é‡ç«™ç¨³ï¼Œæ–¹å¯çœ‹é«˜ä¸€çº¿ã€‚
    æ”¯æ’‘:0.83 / å‹åŠ›:0.86
    æŒ‡æ ‡: MACDç©ºå¤´ | RSI=54.43 | å¸ƒæ—ä¸‹åŠåŒº | é‡æ¯”0.72x
  [159338] ä¸­è¯A500ETF
    ä»Šæ—¥: åå­—æ˜Ÿéœ‡è¡(+0.24%)ï¼Œæ”¶ç›˜ä»·(1.25)æ°å¥½å¡ä½åœ¨MA20(1.25)ï¼Œå¤šç©ºå¹³è¡¡ç‚¹ã€‚é‡æ¯”0.75æ˜¾ç¤ºæŠ›å‹è¡°ç«­ï¼ŒMACDç©ºå¤´è¶‹åŠ¿å‡ç¼“ã€‚
    æ˜æ—¥: åº•ä»“æŒæœ‰ã€‚ä½œä¸ºæ ¸å¿ƒå®½åŸºï¼Œç›®å‰å¤„äºèƒœè´Ÿæ‰‹ä½ç½®ã€‚è‹¥æ˜æ—¥è·Œç ´1.25ä¸”æ— æ³•æ”¶å›ï¼Œéœ€è­¦æƒ•ç³»ç»Ÿæ€§å›è°ƒé£é™©ï¼›ç›®å‰çœ‹ä½œæ˜¯èŠ‚å‰ç»´ç¨³å·¥å…·ï¼Œæš‚ä¸ä¹±åŠ¨ã€‚
    æ”¯æ’‘:1.22 / å‹åŠ›:1.31
    æŒ‡æ ‡: MACDç©ºå¤´ | RSI=55.78 | å¸ƒæ—ä¸ŠåŠåŒº | é‡æ¯”0.75x
  [512480] åŠå¯¼ä½“ETF
    ä»Šæ—¥: å¼±åŠ¿éœ‡è¡(+0.49%)ï¼Œæ”¶ç›˜ä»·(1.64)ä»ä½äºMA20(1.67)ä¸‹æ–¹ï¼Œä¹–ç¦»ç‡-2.25%ã€‚è™½ç„¶RSIå›åˆ°50é™„è¿‘ï¼Œä½†æ•´ä½“å—åˆ¶äºç©ºå¤´æ’åˆ—ï¼Œç¼ºä¹æ¿å—åˆåŠ›ã€‚
    æ˜æ—¥: ä¿æŒè­¦æƒ•ã€‚ç»§ç»­ç»´æŒWATCHçŠ¶æ€ã€‚åœ¨æœ‰æ•ˆç«™ä¸ŠMA20ä¹‹å‰ï¼Œä¸è¿›è¡Œå·¦ä¾§åŠ ä»“ã€‚è‹¥ç»§ç»­ç¼©é‡é˜´è·Œï¼Œéœ€æ³¨æ„å¸ƒæ—ä¸‹è½¨å¼€å£é£é™©ã€‚
    æ”¯æ’‘:1.6 / å‹åŠ›:1.67
    æŒ‡æ ‡: MACDç©ºå¤´ | RSI=51.52 | å¸ƒæ—ä¸‹åŠåŒº | é‡æ¯”0.67x
<sys>:0: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x10c2af880>
ResourceWarning: Enable tracemalloc to get the object allocation traceback
<sys>:0: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x10c2afd30>
ResourceWarning: Enable tracemalloc to get the object allocation traceback
<sys>:0: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x10c3331f0>
ResourceWarning: Enable tracemalloc to get the object allocation traceback
